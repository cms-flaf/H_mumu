anaTupleDef: AnaProd/anaTupleDef.py
analysis_import: Analysis.H_mumu
signal_types:
  - ggH
  - VBFH
  # - ttH
  # - VH
storeFatJets: False

bjet_preselection_branch : "Jet_B1"
tagger_name: particleNet
met_type: "PuppiMET"

channelSelection:
  - muMu

channelDefinition:
  eTau: 13
  muTau: 23
  tauTau: 33
  eE: 11
  eMu: 12
  muMu: 22


corrections:
  # - JEC
  - JER
  - trg
  # - btagWP
  - mu
  - Vpt
  - pu

region: All
region_default: All

QCDRegions:
  - Z_sideband
  # - Signal_Fit
  # - Signal_ext
  # - H_sideband

ApplyBweight: False
triggers:
  muMu: [singleMu]
hist_triggers:
  muMu:
    default:  (HLT_singleMu)

categories:
  - baseline
  - VBF
  - ggH



category_definition:
  baseline: "OS && (mu1_pt > {MuPtTh} && mu2_pt > {MuPtTh})" # OS = opposite charge sign for two muons
  VBF_def : "HasVBF && j1_pt > 25 && j2_pt >25"
  VBF: "baseline && VBF_def"
  ggH: "baseline && !(VBF_def)"
  # https://gitlab.cern.ch/cms-jetmet/coordination/coordination/-/issues/113 --> data/MC differences in Jet distributions
  # spikes are pT dependent, increasing the pT threshold to 50 GeV let them disappear, but reduces significantly the analysis sensitivity
  # non-physics dependent, but related to Jet Energy Correction and Scale
  VBF_JetVeto_def: "VBF_def && ( (abs(j1_eta) < 2.5 || abs(j1_eta) > 3 || j1_pt > 50) ) && ( (abs(j2_eta) < 2.5 || abs(j2_eta) > 3 || j2_pt > 50) )"
  VBF_JetVeto: "baseline && VBF_def && ( (abs(j1_eta) < 2.5 || abs(j1_eta) > 3 || j1_pt > 50) ) && ( (abs(j2_eta) < 2.5 || abs(j2_eta) > 3 || j2_pt > 50) )"
  ggH_VBFJetVeto: " baseline && !(VBF_JetVeto_def) " # no needed

  # # Control region peaking around Z mass
  # baseline_Zmumu: "baseline && DYEnriched"
  # VBF_Zmumu: "baseline_Zmumu && VBF_def "
  # ggH_Zmumu: "baseline_Zmumu && !(VBF_def) "

  # # Control region peaking around Z mass + VBF Jets veto application
  # VBF_Zmumu_JetVeto: "baseline_Zmumu && VBF_JetVeto_def"
  # ggH_Zmumu_JetVeto: "baseline_Zmumu && !VBF_JetVeto_def" # no needed


singleMu_th:
  "Run2_2016": 26
  "Run2_2016_HIPM": 26
  "Run2_2017": 29
  "Run2_2018": 26
  "Run3_2022": 26
  "Run3_2022EE": 26


scales:
  - Up
  - Down


sample_types_to_merge:
  - DY
  - TT
  - W
  - VVV
  - VV
  - ttH
  # - ST
  # - TTVV